/*
AUTOR: DAVID RODRIGUEZ RIVERA
FECHA: 07/03/2021
DESC: CREACIÓN DE LA TABLA INV_VENDEDOR
CAMPOS: 
ESQUEMA: DB_FABRICA
VENDEDOR_CODIGO: CODIGO DEL COLOR (PRIMARY KEY)
VENDERDOR_NOMBRES: NOMBRES VENDEDOR
VENDERDOR_APELLIDOS: APELLIDOS VENDEDOR
VENDEDOR_TELEFONO: TELEFONO VENDEDOR
VENDEDOR_IDENTIFICACION: IDENTIFICACION VENDEDOR
VENDEDOR_DIRECCION: DIRECCION DEL VENDEDOR
VENDEDOR_ACTIVO: INDICA SI ESTA ACTIVO O INACTIVO (0 INACTIVO - 1 ACTIVO)
*/

DECLARE
VALOR NUMBER;

BEGIN 

  SELECT COUNT (*) INTO VALOR FROM ALL_TABLES WHERE TABLE_NAME = 'INV_VENDEDORES' AND OWNER = 'DB_FABRICA';
  
  IF (VALOR = 0) THEN 
  EXECUTE IMMEDIATE '
    CREATE TABLE "DB_FABRICA"."INV_VENDEDORES"
    (
        VENDEDOR_CODIGO number not null,
        VENDEDOR_NOMBRES VARCHAR2(500) NOT NULL,
        VENDEDOR_APELLIDOS VARCHAR2(100) NOT NULL, 
        VENDEDOR_TELEFONO VARCHAR2(30) NOT NULL,
        VENDEDOR_TIPIDEN NUMBER NOT NULL,
        VENDEDOR_IDENTIFICACION VARCHAR2(30) NOT NULL,
        VENDEDOR_DIRECCION VARCHAR2(500) NOT NULL,
        VENDEDOR_ACTIVO NUMBER NOT NULL,
        created_at TIMESTAMP,
        update_at TIMESTAMP,
        CONSTRAINT INV_VENDEDORES_VENDEDOR_CODIGO_PK PRIMARY KEY (VENDEDOR_CODIGO),
        FOREIGN KEY (VENDEDOR_TIPIDEN) REFERENCES DB_FABRICA.INV_TIPIDEN(TIPIDEN_CODIGO)  
    )';
  
  END IF;

END;
/
